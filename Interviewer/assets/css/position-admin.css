/* =============== Màu & nền tone xanh dương → xanh lục pastel =============== */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
:root{
  --navy-800:#1E3A8A; --navy-600:#2563EB; --blue-500:#3B82F6; --blue-300:#93C5FD;
  --teal-300:#6EE7B7; --green-300:#A7F3D0; --green-500:#10B981;
  --ink-900:#0F172A; --ink-700:#374151; --ink-500:#6B7280;
  --panel:#FFFFFF; --border:#E5E7EB;
  --header-h:64px; --sidebar-w:256px; --sidebar-wc:84px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  font-family:'Inter',ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
  color:var(--ink-900); background:#F8FAFC;
}

/* =================== BIỂU ĐỒ FULL KHUNG =================== */
/* Card bọc chart nên là flex-col để canvas “grow” hết chiều cao */
.card{ background:#fff; border:1px solid var(--border); border-radius:16px; padding:20px }
.card-title{ font-size:1.05rem; font-weight:800; color:#0f172a }

/* Phần tử bọc canvas: đặt chiều cao và ép canvas phủ 100% */
.chart-container{
  position: relative;
  height: 360px;                 /* có thể đổi bằng h-[420px]/h-[460px] trong HTML */
  background: transparent;
  border: none;
  box-shadow: none;
  padding: 0;
  overflow: visible;             /* tránh tooltips bị cắt */
}
.chart-container > canvas{
  position: absolute; inset: 0;
  width: 100% !important;
  height: 100% !important;
  display: block !important;
}

/* Layout chính (đã có header + sidebar) */
.main-content{ margin-left:var(--sidebar-w); margin-top:var(--header-h); min-height:calc(100vh - var(--header-h)); transition:margin-left .3s }
.main-content.main-content-collapsed{ margin-left:var(--sidebar-wc) }

/* KPI cards */
.kpi-card{ background:#fff; border:1px solid var(--border); border-radius:16px; padding:20px; transition:border-color .2s, transform .2s }
.kpi-card:hover{ transform:translateY(-1px); border-color:rgba(37,99,235,.25) }
.kpi-num{ font-size:1.75rem; font-weight:800; color:#0f172a }

/* Dropdown “lọc” */
.filter-wrap{ position:relative }
.filter-dropdown{
  position:absolute; top:100%; left:0; z-index:40; width:280px;
  background:#fff; border:1px solid #e5e7eb; border-radius:10px; box-shadow:0 12px 32px rgba(2,6,23,.15);
  padding:8px; margin-top:8px; opacity:0; visibility:hidden; transform:translateY(-6px); transition:all .16s;
}
.filter-dropdown.show{ opacity:1; visibility:visible; transform:translateY(0) }
.filter-opt{ display:flex; align-items:center; gap:8px; padding:8px; border-radius:8px; cursor:pointer; font-weight:600; color:#334155 }
.filter-opt:hover{ background:#F1F5F9 }

.btn{ display:inline-flex; align-items:center; gap:8px; padding:8px 14px; border-radius:10px; border:1px solid var(--border); background:#fff; color:#374151; transition:.18s }
.btn:hover{ border-color:var(--navy-600); color:var(--navy-600); background:#EEF2FF }

/* ===== Modal chi tiết (scoped) ===== */
#positionDetail.modal{
  position: fixed; inset: 0; z-index: 1000; display: none;
  align-items:center; justify-content:center; padding:24px;
  background: rgba(15, 23, 42, 0.55); backdrop-filter: blur(2px);
  opacity: 0; visibility: hidden; transition: opacity .2s, visibility .2s;
}
#positionDetail.modal.show{ display:flex; opacity:1; visibility:visible }
#positionDetail .modal-content{
  width:min(960px,96vw); max-height:90vh; overflow:auto;
  background:#fff; border-radius:16px;
  box-shadow:0 25px 60px rgba(2,6,23,.25), 0 8px 20px rgba(2,6,23,.15);
  transform: translateY(10px) scale(.98);
  transition: transform .2s ease;
}
#positionDetail.modal.show .modal-content{ transform: translateY(0) scale(1) }
#positionDetail .modal-close{ position:absolute; top:10px; right:12px; padding:8px; border-radius:10px }
body.modal-open{ overflow:hidden }

/* Rail ngang (carousel card) */
.job-rail__track{
  display:flex; gap:16px; overflow-x:auto; padding:2px 2px 10px;
  scroll-snap-type:x mandatory; -webkit-overflow-scrolling:touch; scrollbar-gutter:stable;
}
.job-rail__track::-webkit-scrollbar{ height:10px }
.job-rail__track::-webkit-scrollbar-thumb{ background:#cbd5e1; border-radius:9999px }
.job-rail__track:hover::-webkit-scrollbar-thumb{ background:#94a3b8 }
.job-rail__track > *{ flex:0 0 320px; max-width:360px; scroll-snap-align:start; transition:transform .28s, box-shadow .28s, border-color .28s }
@media (min-width:1024px){ .job-rail__track > *{ flex-basis:340px } }
.cards-wide .job-rail__track > *{ flex-basis:420px; max-width:460px }
@media (min-width:1280px){ .cards-wide .job-rail__track > *{ flex-basis:460px } }
html,body{ overflow-x:clip } /* không tạo stacking context như overflow:hidden */

.job-rail .job-rail__track > *:hover{ transform:translateY(-6px) scale(1.01); box-shadow:0 14px 40px rgba(2,6,23,.12); border-color:rgba(59,130,246,.35) }
.job-rail .job-rail__track > *:focus-within{ outline:0; box-shadow:0 16px 44px rgba(2,6,23,.16), 0 0 0 3px rgba(59,130,246,.25); transform:translateY(-4px) }
.job-rail .job-rail__track > *:active{ transform:translateY(-2px) }
/* hiệu ứng glare nhẹ */
.job-rail .job-rail__track > *::after{
  content:""; pointer-events:none; position:absolute; inset:-2px;
  background:radial-gradient(120px 60px at var(--mx,20%) -10%, rgba(255,255,255,.45), transparent 60%);
  opacity:0; transition:opacity .25s ease;
}
.job-rail .job-rail__track > *:hover::after{ opacity:1 }

/* Full-bleed rail: không làm thay đổi width container chart */
:root{ --rail-gutter:32px }
.job-rail.full-bleed{
  margin-inline-start: calc(var(--shell-left) * -1);
  padding-inline-start: var(--shell-left);
  margin-inline-end: calc(var(--rail-gutter) * -1);
  padding-inline-end: var(--rail-gutter);
  width:auto; max-width:none; overflow-x:visible;
}
@supports not (width:100dvw){ .job-rail.full-bleed{ width:100%; margin-left:0; padding-left:0 } }
